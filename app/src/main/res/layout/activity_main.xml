<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#000000"
    android:padding="8dp">

    <!-- Панель с меню и кнопкой поделиться -->
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="#000000"
        android:paddingHorizontal="8dp">

        <!-- Заголовок -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Калькулятор"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold"
            android:layout_centerInParent="true" />

        <!-- Кнопка поделиться -->
        <ImageButton
            android:id="@+id/btnShare"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_toStartOf="@+id/btnMenu"
            android:layout_centerVertical="true"
            android:layout_marginEnd="8dp"
            android:background="@drawable/button_round_background"
            android:src="@drawable/ic_share"
            android:contentDescription="Поделиться результатом"
            android:scaleType="centerInside"
            android:padding="8dp" />

        <!-- Кнопка меню -->
        <ImageButton
            android:id="@+id/btnMenu"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_alignParentEnd="true"
            android:layout_centerVertical="true"
            android:background="@drawable/button_round_background"
            android:src="@drawable/ic_menu"
            android:contentDescription="Меню"
            android:scaleType="centerInside"
            android:padding="8dp" />

    </RelativeLayout>

    <!-- Дисплей калькулятора -->
    <TextView
        android:id="@+id/tvDisplay"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="bottom|end"
        android:text="0"
        android:textColor="#FFFFFF"
        android:textSize="60sp"
        android:padding="20dp"
        android:maxLines="2"
        android:ellipsize="end"
        android:textStyle="bold" />

    <!-- История вычислений -->
    <TextView
        android:id="@+id/tvHistory"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="end"
        android:textColor="#808080"
        android:textSize="20sp"
        android:padding="10dp"
        android:maxLines="1"
        android:ellipsize="start" />

    <!-- Линия разделения -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="#333333"
        android:layout_marginBottom="10dp" />

    <!-- Клавиатура калькулятора -->
    <GridLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="2"
        android:columnCount="4"
        android:rowCount="6"
        android:alignmentMode="alignBounds">

        <!-- Первый ряд -->
        <ImageButton
            android:id="@+id/btnSqrt"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="0"
            android:layout_column="0"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_light"
            android:src="@drawable/ic_sqrt"
            android:contentDescription="Квадратный корень"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnPowerY"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="0"
            android:layout_column="1"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_light"
            android:src="@drawable/ic_power_y"
            android:contentDescription="Возведение в степень"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnClear"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="0"
            android:layout_column="2"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_light"
            android:src="@drawable/ic_clear"
            android:contentDescription="Очистить"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnBackspace"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="0"
            android:layout_column="3"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_light"
            android:src="@drawable/ic_backspace"
            android:contentDescription="Удалить"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <!-- Второй ряд -->
        <ImageButton
            android:id="@+id/btn7"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="1"
            android:layout_column="0"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_7"
            android:contentDescription="7"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btn8"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="1"
            android:layout_column="1"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_8"
            android:contentDescription="8"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btn9"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="1"
            android:layout_column="2"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_9"
            android:contentDescription="9"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnDivide"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="1"
            android:layout_column="3"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_orange"
            android:src="@drawable/ic_divide"
            android:contentDescription="Деление"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <!-- Третий ряд -->
        <ImageButton
            android:id="@+id/btn4"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="2"
            android:layout_column="0"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_4"
            android:contentDescription="4"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btn5"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="2"
            android:layout_column="1"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_5"
            android:contentDescription="5"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btn6"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="2"
            android:layout_column="2"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_6"
            android:contentDescription="6"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnMultiply"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="2"
            android:layout_column="3"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_orange"
            android:src="@drawable/ic_multiply"
            android:contentDescription="Умножение"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <!-- Четвертый ряд -->
        <ImageButton
            android:id="@+id/btn1"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="3"
            android:layout_column="0"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_1"
            android:contentDescription="1"
            android:onClick="onButtonClick"
            android:scaleType="fitCenter"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btn2"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="3"
            android:layout_column="1"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_2"
            android:contentDescription="2"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btn3"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="3"
            android:layout_column="2"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_3"
            android:contentDescription="3"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnSubtract"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="3"
            android:layout_column="3"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_orange"
            android:src="@drawable/ic_subtract"
            android:contentDescription="Вычитание"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <!-- Пятый ряд -->
        <ImageButton
            android:id="@+id/btn0"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="4"
            android:layout_column="0"
            android:layout_columnSpan="2"
            android:layout_rowWeight="1"
            android:layout_columnWeight="2"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_0"
            android:contentDescription="0"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnDecimal"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="4"
            android:layout_column="2"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_dark"
            android:src="@drawable/ic_decimal"
            android:contentDescription="Десятичная точка"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnAdd"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="4"
            android:layout_column="3"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_orange"
            android:src="@drawable/ic_add"
            android:contentDescription="Сложение"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <!-- Шестой ряд -->
        <ImageButton
            android:id="@+id/btnPower"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="5"
            android:layout_column="0"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_light"
            android:src="@drawable/ic_power"
            android:contentDescription="Квадрат"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnPercent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="5"
            android:layout_column="1"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_light"
            android:src="@drawable/ic_percent"
            android:contentDescription="Процент"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnPlusMinus"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="5"
            android:layout_column="2"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_gray_light"
            android:src="@drawable/ic_plus_minus"
            android:contentDescription="Смена знака"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

        <ImageButton
            android:id="@+id/btnEquals"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_row="5"
            android:layout_column="3"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:layout_margin="4dp"
            android:background="@drawable/button_round_orange"
            android:src="@drawable/ic_equals"
            android:contentDescription="Равно"
            android:onClick="onButtonClick"
            android:scaleType="centerInside"
            android:padding="12dp" />

    </GridLayout>

</LinearLayout>